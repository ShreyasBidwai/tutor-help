{% extends "base.html" %}

{% block title %}Add Student - TuitionTrack{% endblock %}

{% block header_title %}Add Student{% endblock %}

{% block content %}
<div class="card">
    <form method="POST" action="{{ url_for('students.add_student') }}">
        <div class="form-group">
            <label class="form-label" for="name">Student Name *</label>
            <input 
                type="text" 
                id="name" 
                name="name" 
                class="form-input" 
                placeholder="Enter student name"
                required
                autofocus
            >
        </div>
        
        <div class="form-group">
            <label class="form-label" for="phone">Parent Phone Number *</label>
            <input 
                type="tel" 
                id="phone" 
                name="phone" 
                class="form-input" 
                placeholder="Enter 10-digit phone number"
                pattern="[0-9]{10}"
                maxlength="10"
                required
            >
        </div>
        
        <div class="form-group">
            <label class="form-label" for="batch_id">Batch *</label>
            <select id="batch_id" name="batch_id" class="form-select" required>
                <option value="">Select a batch</option>
                {% for batch in batches %}
                <option value="{{ batch.id }}">{{ batch.name }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label" for="standard">Standard/Class</label>
            <input 
                type="text" 
                id="standard" 
                name="standard" 
                class="form-input" 
                placeholder="e.g., 10th, 12th, Class 5"
            >
        </div>
        
        <div class="form-group">
            <label class="form-label" for="school_name">School Name</label>
            <input 
                type="text" 
                id="school_name" 
                name="school_name" 
                class="form-input" 
                placeholder="Enter school name"
            >
        </div>
        
        <div class="form-group">
            <label class="form-label" for="address">Address</label>
            <textarea 
                id="address" 
                name="address" 
                class="form-textarea" 
                placeholder="Enter student address"
                style="min-height: 80px;"
            ></textarea>
        </div>
        
        {% if not batches %}
        <div class="alert alert-error">
            No batches available. <a href="{{ url_for('batches.add_batch') }}">Create a batch first</a>
        </div>
        {% endif %}
        
        <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
            <a href="{{ url_for('students.students') }}" class="btn btn-secondary" style="flex: 1;">
                Cancel
            </a>
            <button type="submit" class="btn btn-primary" style="flex: 1;" {% if not batches %}disabled{% endif %}>
                Add Student
            </button>
        </div>
    </form>
</div>

<script>
    // Auto-format phone number input
    document.getElementById('phone').addEventListener('input', function(e) {
        this.value = this.value.replace(/[^0-9]/g, '');
    });
</script>
{% endblock %}

