{% extends "base.html" %}

{% block title %}Profile - TuitionTrack{% endblock %}

{% block header_title %}My Profile{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2 class="card-title">Tuition Information</h2>
    </div>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert {% if category == 'error' %}alert-error{% else %}alert-success{% endif %}" style="margin-bottom: 1.5rem;">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    
    <form method="POST" action="{{ url_for('auth.profile') }}">
        <div class="form-group">
            <label class="form-label" for="mobile">Mobile Number</label>
            <input 
                type="tel" 
                id="mobile" 
                name="mobile" 
                class="form-input" 
                value="{{ user.mobile }}"
                disabled
                style="background-color: #f5f5f5; cursor: not-allowed;"
            >
            <p style="font-size: 0.75rem; color: #666; margin-top: 0.5rem;">
                Mobile number cannot be changed
            </p>
        </div>
        
        <div class="form-group">
            <label class="form-label" for="tutor_name">Tutor/Owner Name</label>
            <input 
                type="text" 
                id="tutor_name" 
                name="tutor_name" 
                class="form-input" 
                value="{{ user.tutor_name or '' }}"
                placeholder="Priya Patel"
                pattern="[a-zA-Z\s\u00C0-\u017F\u0100-\u017F\u0180-\u024F\u1E00-\u1EFF]+"
                title="Name can only contain letters and spaces. No numbers or special characters allowed."
                maxlength="100"
            >
            <p style="font-size: 0.75rem; color: #666; margin-top: 0.5rem;">
                Your name as the tutor/owner (optional). Only letters and spaces allowed.
            </p>
        </div>
        
        <div class="form-group">
            <label class="form-label" for="tuition_name">Tuition Name *</label>
            <input 
                type="text" 
                id="tuition_name" 
                name="tuition_name" 
                class="form-input" 
                value="{{ user.tuition_name or '' }}"
                placeholder="e.g., ABC Coaching Classes, XYZ Tuition"
                required
                maxlength="100"
            >
            <p style="font-size: 0.75rem; color: #666; margin-top: 0.5rem;">
                This name is displayed at the top of all pages
            </p>
        </div>
        
        <div class="form-group">
            <label class="form-label" for="address">Address</label>
            <textarea 
                id="address" 
                name="address" 
                class="form-textarea" 
                placeholder="Enter your tuition address"
                rows="4"
                maxlength="500"
                style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;"
            >{{ user.address or '' }}</textarea>
            <p style="font-size: 0.75rem; color: #666; margin-top: 0.5rem;">
                Your tuition center address (optional)
            </p>
        </div>
        
        <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
            <button type="submit" class="btn btn-primary" style="flex: 1;">
                Save Changes
            </button>
            <a href="{{ url_for('dashboard.dashboard') }}" class="btn btn-secondary" style="flex: 1; text-align: center;">
                Cancel
            </a>
        </div>
    </form>
</div>

<div class="card-header">
        <h2 class="card-title">Account Information</h2>
    </div>
    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
        <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #f0f0f0;">
            <span style="color: #666; font-weight: 500;">Mobile Number:</span>
            <span style="color: #333;">{{ user.mobile }}</span>
        </div>
        <div style="display: flex; justify-content: space-between; padding: 0.75rem 0;">
            <span style="color: #666; font-weight: 500;">User Role:</span>
            <span style="color: #333; text-transform: capitalize;">Tutor</span>
        </div>
    </div>
</div>
{% endblock %}

